<section >
    <div class="fp-page-head">
        <img class="cart-mobile-container" src="assets/shopping-trolley.jpg"  alt="Car Mobile">
        <!--<img class="table" src="assets/large-shoppin-cart.jpg"  alt="Cart Desktop">-->
        <div class="fp-page-title">
          
          <!-- <h1>Shopping Cart</h1> -->
        </div>
  </div>
</section>
<!-- <div *ngIf="cartproduct && cartproduct.length < 1" class="container load-item">
  <div class="progress-loading" >
    <div class="preloader-wrapper big active">
      <div class="spinner-layer spinner-blue-only">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>
  </div>
</div> -->
<section class="main-container-load ">
  <section class="main-container container-r Shopping-container">
  <!--<p *ngIf="currentuser.includes('@')">Your email: {{currentuser}}</p>-->
  <!-- <div class="empty-basket" *ngIf="cartproduct && cartproduct.length > 0">
    <button (click)="clearCart()" class="btn btn-danger" type="button">Empty</button>
  </div> -->
  <h1 class="head-1">Your Basket <i class="fa fa-shopping-cart" aria-hidden="true"></i>
  </h1>
    <div class="empty-cart" *ngIf="cartproduct.length < 1">
      <h5>You have no item in your Basket</h5>
    </div>
    <div class="cart-mobile-container" *ngIf="cartproduct && cartproduct.length > 0">
      <div class="cart-mobile" *ngFor="let item of cartproduct" >
        <div class="cart-0">
          <p>{{item.qty}}</p>
        </div>
        <div class="cart-1">
          <img [src]="item.imageUrl" style="width: 30px;" alt="">
        </div>
        <div class="cart-2">
          <p>{{item.name}}</p>
        </div>
        <div class="cart-3">
          <p> @ {{item.price | currency: 'GBP': true}}</p>
        </div>
        <div class="cart-4">
          <p> {{item.qty * item.price | currency: 'GBP': true}}</p>
        </div>
        <div class="cart-5">
          <p><i (click)="removeItem(item.id)" class="fa fa-times remove-cart-i" aria-hidden="true"></i></p>
        </div>
        
      </div>
      <hr>
        <p style="padding:0px; margin:0px; font-size:12px; margin-left: 20px;">You just Saved:
          <span style="color:red;">- {{sumOldCart - sumCart | currency:'GBP':true}}</span>
        </p>
      <div class="row total-cart">
        <div class="col xs6"><h5>Total:</h5></div>
        <div class="col xs6"><p style="color:#f48024"><strong>{{sumCart | currency: 'GBP': true}}</strong></p></div>

      </div>
    </div>
    <div class="dextop">
      <table class="table table-striped cart-table" *ngIf="cartproduct && cartproduct.length > 0">
        <thead class="thead-inverse">
          <tr>
              <th></th>
              <th>Product</th>
              <th>Qty</th>
              <th>Size</th>
              <th>Blend</th>
              <!--<th>Roast</th>-->
              <th>Price</th>
              <th>Total</th>
              <th></th>
              <!--<th><button (click)="clearCart()" class="btn btn-danger" type="button">Empty your basket</button></th>-->
          </tr>
        </thead>
        <tbody>
          
          <tr *ngFor="let item of cartproduct">
            <th>
              <img [src]="item.imageUrl" style="width: 30px;" alt="">
            </th>
            <td>{{item.name}}</td>
            <td contenteditable="true">{{item.qty}}</td>
            <td>{{item.size}}</td>
            <td>{{item.type}}</td>
            <!--<td>{{item.roast}}</td>-->
            <td>{{item.price | currency: 'GBP': true}}</td>
            <td><strong>{{item.qty * item.price | currency: 'GBP': true}}</strong></td>
            <td><i (click)="removeItem(item.id)" class="fa fa-times remove-cart-i" aria-hidden="true"></i>
          </td>
            </tr>
          </tbody>
        </table>
        <div class="sum-container" *ngIf="cartproduct && cartproduct.length > 0">
          <div class="row cartSum">
            
            <div style="padding: 10px;" class="col l12">
              <h6 style="color:slategray"><small>You Just Saved yourself</small>
                <span style="color:red;">- {{sumOldCart - sumCart | currency:'GBP':true}}</span>
              </h6>
              
            </div>
            <div  class="col l12" style="background-color:#000; padding: 10px;">
              <div class="col l6">
                <h5 style="color:#fff; font-size:1.5em;">Total:</h5>
              </div>
              <div class="col l6">
                <h4 style="letter-spacing:2px; color:#f48024"><strong>{{sumCart | currency: 'GBP': true}}</strong></h4>
              </div>
            </div>
      
          </div>
          
        </div>
        <div class="check-button">
              <p *ngIf="cartproduct && cartproduct.length > 0">
                <input (change)="termsChange($event)" type="checkbox" id="terms" />
                <label for="terms">I agree to the return policy! <span > <a routerLink="/return-policy" target="blank" style=" color: orangered" >read..</a> </span></label>
              </p>
              <br>
              <div class="check-out right-nav">
                
                  <button [disabled]="!accepTerms" id="btn-check" *ngIf="cartproduct.length > 0" (click)="moveTopayment()" class="waves-effect waves-light btn" type="button">Check Out <i  class="material-icons"></i></button>
                  <button (click)="back()" class="waves-effect waves-light btn" type="button">Go Back <i class="material-icons"></i></button>
              </div>
          </div>
          
          <!--<div class="cart-login-alert" *ngIf="liginAlert">
            <div>
              <p>Please register or login with email and password before check out</p>
            </div>
            <button class="btn btn-danger" type="button">Register</button> Or
              <button class="btn btn-primary" type="button">login</button>
          </div>-->

        </div>

  </section>
  <div *ngIf="pageReload" class="reload-cover">
      <div class="progress-loading" >
        <div class="preloader-wrapper big active">
          <div class="spinner-layer spinner-blue-only">
            <div class="circle-clipper left">
              <div class="circle"></div>
            </div><div class="gap-patch">
              <div class="circle"></div>
            </div><div class="circle-clipper right">
              <div class="circle"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="firstPageLoad" class="reload-cover-white">
        <div class="progress-loading" >
          <div class="preloader-wrapper big active">
            <div class="spinner-layer spinner-blue-only">
              <div class="circle-clipper left">
                <div class="circle"></div>
              </div><div class="gap-patch">
                <div class="circle"></div>
              </div><div class="circle-clipper right">
                <div class="circle"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
</section>

<!--Anonymous login continue-->
<div *ngIf="!currentUserLogin" class="anonymous-wrapper">
    <div class="anonymous">
      <div class="ano-content jumbotron">
        <i (click)="closeWindow()" class="fa fa-close" aria-hidden="true"></i>
        <!-- <button (click)="logAnonymous()" class="ano-b btn btn-default mce-btn-small" type="button"><i class="fa fa-user-circle-o" aria-hidden="true"></i> Be Our Guest</button> -->
        <!-- <p style="margin: 0px; padding: 0px;">OR</p> -->
        <p>Please Login with your email or Register to continue to checkout </p>
        <button (click)="closeWindow()" routerLink="/login" class="btn mce-btn-small btn-success" type="button"><i class="fa fa-sign-in" aria-hidden="true"></i> Login</button>
        <button (click)="closeWindow()" routerLink="/signup" class="btn mce-btn-small btn-primary" type="button"><i class="fa fa-registered" aria-hidden="true"></i> Register</button>
        <br>
        <!--<h4 style="margin-top: 10px;">OR</h4>-->
        <!--<p>You may also want to <span class="btn" id="span" style="text-decoration: underline; color: lightslategrey" (click)="registerUser()">register</span> here </p>
        <button (click)="closeWindow()" class="btn mce-btn-large btn-danger" type="">close</button>-->
      </div>
    </div>
</div>





